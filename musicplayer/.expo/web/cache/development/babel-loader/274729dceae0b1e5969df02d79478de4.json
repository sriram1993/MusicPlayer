{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState, useContext, useEffect } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { MusicContext } from \"../utilities/store\";\nimport { Audio } from 'expo-av';\nimport AntDesign from \"@expo/vector-icons/AntDesign\";\nimport Entypo from \"@expo/vector-icons/Entypo\";\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport * as Progress from 'react-native-progress';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar TracksScreen = function TracksScreen(_ref) {\n  var navigation = _ref.navigation;\n  var storeData = useContext(MusicContext);\n  var _useState = useState(storeData.state.tracks),\n    _useState2 = _slicedToArray(_useState, 2),\n    tracksState = _useState2[0],\n    setTracksState = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isPlaying = _useState4[0],\n    setIsPlaying = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    currentTrack = _useState6[0],\n    setCurrentTrack = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    selectedItemId = _useState8[0],\n    setSelectedItemId = _useState8[1];\n  var _useState9 = useState(0),\n    _useState10 = _slicedToArray(_useState9, 2),\n    progress = _useState10[0],\n    setProgress = _useState10[1];\n  var _useState11 = useState(0),\n    _useState12 = _slicedToArray(_useState11, 2),\n    increment = _useState12[0],\n    setIncrement = _useState12[1];\n  var _useState13 = useState(null),\n    _useState14 = _slicedToArray(_useState13, 2),\n    duration = _useState14[0],\n    setDuration = _useState14[1];\n  var _useState15 = useState(0),\n    _useState16 = _slicedToArray(_useState15, 2),\n    minutes = _useState16[0],\n    setMinutes = _useState16[1];\n  var _useState17 = useState(0),\n    _useState18 = _slicedToArray(_useState17, 2),\n    seconds = _useState18[0],\n    setSeconds = _useState18[1];\n  var _useState19 = useState(0),\n    _useState20 = _slicedToArray(_useState19, 2),\n    remainingMinutes = _useState20[0],\n    setRemainingMinutes = _useState20[1];\n  var _useState21 = useState(0),\n    _useState22 = _slicedToArray(_useState21, 2),\n    remainingSeconds = _useState22[0],\n    setRemainingSeconds = _useState22[1];\n  useEffect(function () {\n    var interval;\n    if (isPlaying) {\n      interval = setInterval(function () {\n        setProgress(function (prevState) {\n          var newProgressValue = prevState + increment;\n          return newProgressValue >= 1 ? 1 : newProgressValue;\n        });\n        if (remainingSeconds + 1 >= 60) {\n          setRemainingSeconds(0);\n          setRemainingMinutes(remainingMinutes + 1);\n        } else {\n          setRemainingSeconds(remainingSeconds + 1);\n        }\n      }, 1000);\n    }\n    return function () {\n      clearInterval(interval);\n    };\n  }, [isPlaying, remainingSeconds, remainingMinutes]);\n  useEffect(function () {\n    var removeTrack = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        yield currentTrack.unloadAsync();\n      });\n      return function removeTrack() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    return function () {\n      if (currentTrack !== null) removeTrack();\n    };\n  }, [currentTrack]);\n  var showAlert = function showAlert(message) {\n    if (Platform.OS === 'web') {\n      window.alert(message);\n    } else {\n      Alert.alert(message);\n    }\n  };\n  var searchLogic = function searchLogic(text) {\n    text = text.toLowerCase();\n    if (text === \"\") {\n      setTracksState(storeData.state.tracks);\n    } else {\n      var filteredTracks = storeData.state.tracks.filter(function (track) {\n        return track.name.toLowerCase().includes(text);\n      });\n      setTracksState(filteredTracks);\n    }\n  };\n  var play = function () {\n    var _ref3 = _asyncToGenerator(function* (item) {\n      var track = new Audio.Sound();\n      yield track.loadAsync(item.path, {\n        onError: function onError(error) {\n          showAlert(\"Error loading track!\");\n          console.log(error);\n          return;\n        }\n      });\n      setProgress(0);\n      yield track.playAsync({\n        onError: function onError(error) {\n          showAlert(\"Error playing track!\");\n          console.log(error);\n          return;\n        }\n      });\n      if (isPlaying === false) setIsPlaying(true);\n      if (selectedItemId === null) setSelectedItemId(item.id);\n      setCurrentTrack(track);\n      var minutes = Math.floor(item.duration / 60);\n      var seconds = item.duration % 60;\n      setMinutes(minutes);\n      setSeconds(seconds);\n      setRemainingMinutes(0);\n      setRemainingSeconds(0);\n      setDuration(minutes + \" minutes and \" + seconds + \" seconds\");\n      try {\n        track.setOnPlaybackStatusUpdate(function () {\n          var _ref4 = _asyncToGenerator(function* (status) {\n            if (status.didJustFinish) {\n              yield track.unloadAsync();\n              setIsPlaying(false);\n              setSelectedItemId(null);\n              setCurrentTrack(null);\n              setProgress(0);\n              setIncrement(0);\n              setDuration(null);\n            }\n          });\n          return function (_x2) {\n            return _ref4.apply(this, arguments);\n          };\n        }());\n      } catch (error) {\n        showAlert(\"Error while playing track\");\n        console.log(error);\n        yield track.unloadAsync();\n        setIsPlaying(false);\n        setSelectedItemId(null);\n        setCurrentTrack(null);\n        setProgress(0);\n        setIncrement(0);\n        setDuration(null);\n        return;\n      }\n    });\n    return function play(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var pause = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      try {\n        var playbackStatus = yield currentTrack.getStatusAsync();\n        if (playbackStatus.isLoaded) {\n          yield currentTrack.pauseAsync();\n        }\n        setIsPlaying(false);\n      } catch (err) {\n        showAlert(\"Error pausing track!\");\n        console.log(err);\n        return;\n      }\n    });\n    return function pause() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var resume = function () {\n    var _ref6 = _asyncToGenerator(function* () {\n      try {\n        var playbackStatus = yield currentTrack.getStatusAsync();\n        if (playbackStatus.isLoaded) {\n          yield currentTrack.playAsync();\n        }\n        setIsPlaying(true);\n      } catch (err) {\n        showAlert(\"Error resuming track!\");\n        console.log(err);\n        return;\n      }\n    });\n    return function resume() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var handlePlayTrack = function () {\n    var _ref7 = _asyncToGenerator(function* (item) {\n      if (item === null && currentTrack === null) {\n        item = tracksState[0];\n        setIncrement(Number((1 / item.duration).toFixed(17)));\n        setDuration(null);\n        play(item);\n      } else if (item !== null && currentTrack === null) {\n        setIncrement(Number((1 / item.duration).toFixed(17)));\n        setDuration(null);\n        play(item);\n      } else if (item !== null && currentTrack !== null || item === null && currentTrack !== null) {\n        if (item !== null) {\n          if (item.id === selectedItemId) {\n            if (isPlaying) pause();else resume();\n          } else {\n            yield currentTrack.unloadAsync();\n            setCurrentTrack(null);\n            setIncrement(Number((1 / item.duration).toFixed(17)));\n            setDuration(null);\n            play(item);\n          }\n        } else {\n          if (isPlaying) pause();else resume();\n        }\n      } else {\n        showAlert(\"Some error occured. Please try again later!\");\n      }\n    });\n    return function handlePlayTrack(_x3) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var handleForwardBackward = function handleForwardBackward(type) {\n    if (currentTrack === null) {\n      showAlert(\"No track is currently in play\");\n      return;\n    } else {\n      var updatedId;\n      if (type === \"forward\") {\n        if (Number(selectedItemId) + 1 > 10) updatedId = 1;else updatedId = Number(selectedItemId) + 1;\n      } else if (type === \"backward\") {\n        if (Number(selectedItemId) - 1 < 1) updatedId = 10;else updatedId = Number(selectedItemId) - 1;\n      } else {\n        showAlert(\"Something went wrong. Please try later!\");\n        return;\n      }\n      updatedId = updatedId.toString();\n      var item = storeData.state.tracks.find(function (track) {\n        return track.id === updatedId;\n      });\n      setSelectedItemId(item.id);\n      handlePlayTrack(item);\n    }\n  };\n  var handleFavorite = function () {\n    var _ref8 = _asyncToGenerator(function* (item) {\n      yield storeData.dispatchFunction({\n        type: \"HANDLE_FAVORITE\",\n        payload: {\n          data: item\n        }\n      });\n      setTracksState(function (prevTracksState) {\n        return prevTracksState.map(function (track) {\n          return track.id === item.id ? _objectSpread(_objectSpread({}, track), {}, {\n            favorite: !track.favorite\n          }) : track;\n        });\n      });\n    });\n    return function handleFavorite(_x4) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  var addToPlaylist = function () {\n    var _ref9 = _asyncToGenerator(function* (item) {\n      navigation.navigate('playlists', {\n        track: item,\n        screen: \"tracks\"\n      });\n    });\n    return function addToPlaylist(_x5) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n  var renderItem = function renderItem(_ref10) {\n    var item = _ref10.item;\n    var isSelected = item.id === selectedItemId;\n    var handleSelectedItem = function handleSelectedItem() {\n      if (!isSelected) setSelectedItemId(item.id);\n      handlePlayTrack(item);\n    };\n    return _jsx(TouchableWithoutFeedback, {\n      onPress: function onPress() {\n        return handleSelectedItem();\n      },\n      children: _jsxs(View, {\n        style: styles.box,\n        children: [_jsx(Image, {\n          source: item.icon,\n          style: styles.icon\n        }), _jsxs(View, {\n          children: [_jsxs(Text, {\n            style: styles.trackName,\n            children: [\" \", item.name, \" \"]\n          }), _jsxs(Text, {\n            style: styles.trackPerformer,\n            children: [\" By \", item.performer, \" \"]\n          }), isSelected ? _jsx(MaterialCommunityIcons, {\n            name: \"waveform\",\n            size: 49,\n            style: styles.waveformIcon\n          }) : null]\n        }), _jsxs(View, {\n          style: {\n            flex: 1,\n            flexDirection: \"row\",\n            justifyContent: \"flex-end\",\n            right: 70,\n            bottom: 4\n          },\n          children: [_jsx(TouchableWithoutFeedback, {\n            onPress: function onPress() {\n              return addToPlaylist(item);\n            },\n            children: _jsx(View, {\n              style: styles.createPlaylistButton,\n              children: _jsx(Text, {\n                style: styles.createPlaylistButtonText,\n                children: \" Add to playlist \"\n              })\n            })\n          }), item.favorite ? _jsx(AntDesign, {\n            name: \"heart\",\n            color: \"red\",\n            size: 49,\n            style: styles.heart,\n            onPress: function onPress() {\n              return handleFavorite(item);\n            }\n          }) : _jsx(AntDesign, {\n            name: \"hearto\",\n            size: 49,\n            style: styles.heart,\n            onPress: function onPress() {\n              return handleFavorite(item);\n            }\n          })]\n        })]\n      })\n    });\n  };\n  var renderPlayPause = function renderPlayPause() {\n    return isPlaying ? _jsx(AntDesign, {\n      name: \"pause\",\n      size: 75,\n      style: styles.playPause,\n      onPress: function onPress() {\n        return handlePlayTrack(null);\n      }\n    }) : _jsx(Entypo, {\n      name: \"controller-play\",\n      size: 75,\n      style: styles.playPause,\n      onPress: function onPress() {\n        return handlePlayTrack(null);\n      }\n    });\n  };\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.view1,\n      children: _jsx(TextInput, {\n        style: styles.searchbar,\n        keyboardType: \"default\",\n        placeholder: \"Search tracks\",\n        placeholderTextColor: \"black\",\n        onChangeText: function onChangeText(text) {\n          return searchLogic(text);\n        }\n      })\n    }), _jsxs(View, {\n      style: styles.view2,\n      children: [_jsx(View, {\n        style: styles.topBorder\n      }), _jsx(FlatList, {\n        data: tracksState,\n        extraData: tracksState,\n        renderItem: renderItem,\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        },\n        showsVerticalScrollIndicator: false\n      })]\n    }), _jsxs(View, {\n      style: styles.view3,\n      children: [_jsx(Progress.Bar, {\n        progress: progress,\n        width: 400,\n        height: 19,\n        color: \"black\",\n        unfilledColor: \"#f1f2ff\",\n        style: styles.bar\n      }), _jsxs(View, {\n        style: styles.controlsWrapper,\n        children: [_jsx(AntDesign, {\n          name: \"banckward\",\n          size: 50,\n          style: styles.backward,\n          onPress: function onPress() {\n            return handleForwardBackward(\"backward\");\n          }\n        }), renderPlayPause(), _jsx(AntDesign, {\n          name: \"forward\",\n          size: 50,\n          style: styles.forward,\n          onPress: function onPress() {\n            return handleForwardBackward(\"forward\");\n          }\n        }), duration !== null && _jsxs(Text, {\n          style: styles.duration,\n          children: [remainingMinutes >= 0 && remainingMinutes <= 9 ? \"0\" + remainingMinutes : remainingMinutes, \":\", remainingSeconds >= 0 && remainingSeconds <= 9 ? \"0\" + remainingSeconds : remainingSeconds, \" / \", minutes >= 0 && minutes <= 9 ? \"0\" + minutes : minutes, \":\", seconds >= 0 && seconds <= 9 ? \"0\" + seconds : seconds]\n        })]\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: \"column\",\n    backgroundColor: '#f1f2ff'\n  },\n  view1: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  searchbar: {\n    backgroundColor: \"#FFFFFF\",\n    height: 50,\n    width: 320,\n    borderWidth: 1,\n    borderRadius: 30,\n    borderColor: \"black\",\n    fontSize: 25,\n    fontWeight: '400',\n    fontFamily: 'Roboto',\n    paddingLeft: 20\n  },\n  view2: {\n    flex: 9,\n    alignItems: \"flex-start\",\n    justifyContent: \"flex-start\"\n  },\n  topBorder: {\n    width: Dimensions.get('window').width,\n    borderTopWidth: 1\n  },\n  box: {\n    flexDirection: \"row\",\n    height: 140,\n    width: Dimensions.get('window').width,\n    borderBottomWidth: 1,\n    alignItems: \"center\",\n    justifyContent: \"flex-start\"\n  },\n  icon: {\n    height: 170,\n    width: 170,\n    marginTop: 4\n  },\n  trackName: {\n    color: \"black\",\n    fontSize: 24,\n    fontWeight: '600',\n    fontFamily: 'Roboto'\n  },\n  trackPerformer: {\n    color: \"black\",\n    fontSize: 24,\n    fontWeight: '400',\n    fontFamily: 'Roboto',\n    fontStyle: \"italic\"\n  },\n  createPlaylistButton: {\n    width: 134,\n    height: 40,\n    borderRadius: 30,\n    borderColor: '#3d54dc',\n    backgroundColor: \"#3d54dc\",\n    borderWidth: 3,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    top: 7,\n    right: 10\n  },\n  createPlaylistButtonText: {\n    color: \"white\",\n    fontSize: 19,\n    fontWeight: '400',\n    fontFamily: 'Roboto'\n  },\n  heart: {\n    left: 30,\n    top: 3\n  },\n  view3: {\n    flex: 1.5,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  bar: {\n    top: 10\n  },\n  controlsWrapper: {\n    flexDirection: \"row\",\n    width: Dimensions.get('window').width,\n    paddingLeft: 630\n  },\n  backward: {\n    paddingTop: 13\n  },\n  playPause: {\n    top: 5,\n    marginLeft: 10,\n    marginRight: 4\n  },\n  forward: {\n    paddingTop: 13\n  },\n  duration: {\n    color: \"black\",\n    fontSize: 17,\n    fontWeight: '600',\n    fontFamily: 'Roboto',\n    paddingTop: 12,\n    paddingLeft: 9\n  }\n});\nexport default TracksScreen;","map":{"version":3,"names":["React","useState","useContext","useEffect","SafeAreaView","View","Text","Image","TouchableWithoutFeedback","FlatList","TextInput","Dimensions","Alert","Platform","StyleSheet","MusicContext","Audio","AntDesign","Entypo","MaterialCommunityIcons","Progress","jsx","_jsx","jsxs","_jsxs","TracksScreen","_ref","navigation","storeData","_useState","state","tracks","_useState2","_slicedToArray","tracksState","setTracksState","_useState3","_useState4","isPlaying","setIsPlaying","_useState5","_useState6","currentTrack","setCurrentTrack","_useState7","_useState8","selectedItemId","setSelectedItemId","_useState9","_useState10","progress","setProgress","_useState11","_useState12","increment","setIncrement","_useState13","_useState14","duration","setDuration","_useState15","_useState16","minutes","setMinutes","_useState17","_useState18","seconds","setSeconds","_useState19","_useState20","remainingMinutes","setRemainingMinutes","_useState21","_useState22","remainingSeconds","setRemainingSeconds","interval","setInterval","prevState","newProgressValue","clearInterval","removeTrack","_ref2","_asyncToGenerator","unloadAsync","apply","arguments","showAlert","message","OS","window","alert","searchLogic","text","toLowerCase","filteredTracks","filter","track","name","includes","play","_ref3","item","Sound","loadAsync","path","onError","error","console","log","playAsync","id","Math","floor","setOnPlaybackStatusUpdate","_ref4","status","didJustFinish","_x2","_x","pause","_ref5","playbackStatus","getStatusAsync","isLoaded","pauseAsync","err","resume","_ref6","handlePlayTrack","_ref7","Number","toFixed","_x3","handleForwardBackward","type","updatedId","toString","find","handleFavorite","_ref8","dispatchFunction","payload","data","prevTracksState","map","_objectSpread","favorite","_x4","addToPlaylist","_ref9","navigate","screen","_x5","renderItem","_ref10","isSelected","handleSelectedItem","onPress","children","style","styles","box","source","icon","trackName","trackPerformer","performer","size","waveformIcon","flex","flexDirection","justifyContent","right","bottom","createPlaylistButton","createPlaylistButtonText","color","heart","renderPlayPause","playPause","container","view1","searchbar","keyboardType","placeholder","placeholderTextColor","onChangeText","view2","topBorder","extraData","keyExtractor","showsVerticalScrollIndicator","view3","Bar","width","height","unfilledColor","bar","controlsWrapper","backward","forward","create","backgroundColor","alignItems","borderWidth","borderRadius","borderColor","fontSize","fontWeight","fontFamily","paddingLeft","get","borderTopWidth","borderBottomWidth","marginTop","fontStyle","top","left","paddingTop","marginLeft","marginRight"],"sources":["/usercode/musicplayer/components/TracksScreen.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { \n  SafeAreaView,\n  View,\n  Text,\n  Image,\n  TouchableWithoutFeedback,\n  FlatList,\n  TextInput,\n  Dimensions,\n  Alert,\n  Platform,\n  StyleSheet\n} from 'react-native';\nimport { MusicContext } from '../utilities/store';\nimport { Audio } from 'expo-av';\nimport AntDesign from 'react-native-vector-icons/AntDesign';\nimport Entypo from 'react-native-vector-icons/Entypo';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport * as Progress from 'react-native-progress';\n\nconst TracksScreen = ({ navigation }) => {\n\n  const storeData = useContext(MusicContext);\n  const [tracksState, setTracksState] = useState(storeData.state.tracks);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [selectedItemId, setSelectedItemId] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [increment, setIncrement] = useState(0);\n  const [duration, setDuration] = useState(null);\n  const [minutes, setMinutes] = useState(0);\n  const [seconds, setSeconds] = useState(0);\n  const [remainingMinutes, setRemainingMinutes] = useState(0);\n  const [remainingSeconds, setRemainingSeconds] = useState(0);\n\n  useEffect(() => {\n    let interval;\n    if (isPlaying) {\n      interval = setInterval(() => {\n        setProgress((prevState) => {\n          const newProgressValue = prevState + increment;\n          return newProgressValue >= 1 ? 1 : newProgressValue;\n        });\n        if (remainingSeconds + 1 >= 60) {\n          setRemainingSeconds(0);\n          setRemainingMinutes(remainingMinutes + 1);\n        }\n        else {\n          setRemainingSeconds(remainingSeconds + 1);\n        }\n      }, 1000);\n    }\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isPlaying, remainingSeconds, remainingMinutes]);\n\n  useEffect(() => {\n    const removeTrack = async () => {\n      await currentTrack.unloadAsync();\n    }\n    return () => {\n      // Remove the current playing track if user navigates to some other screen\n      if (currentTrack !== null)\n        removeTrack();\n    };\n  }, [currentTrack]);\n\n  const showAlert = (message) => {\n    if (Platform.OS === 'web') {\n      window.alert(message);\n    } else {\n      Alert.alert(message);\n    }\n  };\n\n  const searchLogic = (text) => {\n    text = text.toLowerCase();\n    if (text === \"\") {\n      setTracksState(storeData.state.tracks);\n    }\n    else {\n      let filteredTracks = storeData.state.tracks.filter(track => (track.name.toLowerCase().includes(text)))\n      setTracksState(filteredTracks);\n    }\n  }\n\n  const play = async (item) => {\n    const track = new Audio.Sound();\n    await track.loadAsync(item.path, { onError: (error) => {\n      showAlert(\"Error loading track!\");\n      console.log(error);\n      return;\n    }});\n    setProgress(0);\n    await track.playAsync({ onError: (error) => {\n      showAlert(\"Error playing track!\");\n      console.log(error);\n      return;\n    }});\n    if (isPlaying === false)\n      setIsPlaying(true);\n    if (selectedItemId === null)\n      setSelectedItemId(item.id);\n    setCurrentTrack(track);\n    // Calculate track duration in minutes and seconds\n    const minutes = Math.floor(item.duration / 60);\n    const seconds = item.duration % 60;\n    setMinutes(minutes);\n    setSeconds(seconds);\n    setRemainingMinutes(0);\n    setRemainingSeconds(0);\n    setDuration(`${minutes} minutes and ${seconds} seconds`);\n    try {\n      track.setOnPlaybackStatusUpdate(async (status) => {\n        if (status.didJustFinish) {\n            // When track finishes, unload it and reset state variables\n            await track.unloadAsync();\n            setIsPlaying(false);\n            setSelectedItemId(null);\n            setCurrentTrack(null);\n            setProgress(0);\n            setIncrement(0);\n            setDuration(null);\n        }\n      });\n    } catch (error) {\n      showAlert(\"Error while playing track\");\n      console.log(error);\n      await track.unloadAsync();\n      setIsPlaying(false);\n      setSelectedItemId(null);\n      setCurrentTrack(null);\n      setProgress(0);\n      setIncrement(0);\n      setDuration(null);\n      return;\n    }\n  }\n\n  const pause = async () => {\n    try {\n      const playbackStatus = await currentTrack.getStatusAsync();\n      if (playbackStatus.isLoaded) {\n        await currentTrack.pauseAsync();\n      }\n      setIsPlaying(false);\n    } catch (err) {\n      showAlert(\"Error pausing track!\");\n      console.log(err);\n      return;\n    }\n  }\n\n  const resume = async () => {\n    try {\n      const playbackStatus = await currentTrack.getStatusAsync();\n      if (playbackStatus.isLoaded) {\n        await currentTrack.playAsync();\n      }\n      setIsPlaying(true);\n    } catch (err) {\n      showAlert(\"Error resuming track!\");\n      console.log(err);\n      return;\n    }\n  }\n\n  const handlePlayTrack = async (item) => {\n    // At the start when no track is playing and user clicks play button icon\n    if (item === null && currentTrack === null) {\n      // We select the first track to be played\n      item = tracksState[0];\n      setIncrement(Number((1 / item.duration).toFixed(17)));\n      setDuration(null);\n      play(item);\n    } \n    // If at start user clicks any of the track\n    else if (item !== null && currentTrack === null) {\n      setIncrement(Number((1 / item.duration).toFixed(17)));\n      setDuration(null);\n      play(item);\n    }\n    // First condition checks if user clicks any other track while some track is playing\n    // Second condition checks if user clicks play/pause icon while some track is playing\n    else if ((item !== null && currentTrack !== null) || (item === null && currentTrack !== null)) {\n      if (item !== null) {\n        // If same item clicked again pause and resume it accordingly\n        if (item.id === selectedItemId) {\n          if (isPlaying)\n            pause();\n          else\n            resume();\n        }\n        // If different track clicked, unload the previous playing track and play new track\n        else {\n          await currentTrack.unloadAsync();\n          setCurrentTrack(null);\n          setIncrement(Number((1 / item.duration).toFixed(17)));\n          setDuration(null);\n          play(item);\n        }\n      }\n      // If play/pause icon clicked while any track is playing, pause/resume track accordingly\n      else {\n        if (isPlaying)\n          pause();\n        else\n          resume();\n      }\n    }\n    else {\n      showAlert(\"Some error occured. Please try again later!\");\n    }\n  }\n\n  const handleForwardBackward = (type) => {\n    // If no track is playing and user clicks forward/backward icons\n    if (currentTrack === null) {\n      showAlert(\"No track is currently in play\");\n      return;\n    }\n    else {\n      let updatedId;\n      // If forward icon is pressed\n      if (type === \"forward\") {\n        // If next id is greater than 10 we loop back to first track\n        // Otherwise we select the id of the next track in order\n        if ((Number(selectedItemId) + 1) > 10)\n          updatedId = 1;\n        else\n          updatedId = Number(selectedItemId) + 1;\n      }\n      // If backward icon is pressed\n      else if (type === \"backward\") {\n        // If previous id is less than 1 we loop back to last track\n        // Otherwise we select the id of the previous track in order\n        if ((Number(selectedItemId) - 1) < 1)\n          updatedId = 10;\n        else\n          updatedId = Number(selectedItemId) - 1;\n      }\n      else {\n        showAlert(\"Something went wrong. Please try later!\");\n        return;\n      }\n      updatedId = updatedId.toString();\n      // We are filtering item having updatedId from storeData because\n      // our tracks might be filtered as well due to search bar which can cause some error\n      const item = storeData.state.tracks.find(track => track.id === updatedId);\n      setSelectedItemId(item.id);\n      handlePlayTrack(item);\n    }\n  }\n\n  const handleFavorite = async (item) => {\n    await storeData.dispatchFunction({\n      type: \"HANDLE_FAVORITE\",\n      payload: {\n        data: item\n      }\n    });\n    setTracksState((prevTracksState) =>\n      prevTracksState.map((track) =>\n        track.id === item.id ? { ...track, favorite: !track.favorite } : track\n      )\n    );\n  }\n\n  const addToPlaylist = async (item) => {\n    navigation.navigate('playlists', {\n      track: item,\n      screen: \"tracks\"\n    });\n  }\n\n  const renderItem = ({ item }) => {\n    const isSelected = item.id === selectedItemId;\n    const handleSelectedItem = () => {\n      if (!isSelected)\n        setSelectedItemId(item.id);\n      handlePlayTrack(item);\n    };\n    return (\n      <TouchableWithoutFeedback onPress={ () => handleSelectedItem()}>\n        <View style={styles.box}>\n          <Image source={ item.icon } style={styles.icon} />\n          <View>\n            <Text style={styles.trackName}> { item.name } </Text>\n            <Text style={styles.trackPerformer}> By { item.performer } </Text>\n            {isSelected ? (\n              <MaterialCommunityIcons\n                name=\"waveform\"\n                size={49}\n                style={styles.waveformIcon}\n              />\n            ) : null}\n          </View>\n          <View style={{flex: 1, flexDirection: \"row\", justifyContent: \"flex-end\", right: 70, bottom: 4}}>\n          <TouchableWithoutFeedback\n            onPress={() => addToPlaylist(item)}\n          >\n            <View style={styles.createPlaylistButton}>\n              <Text style={styles.createPlaylistButtonText}> Add to playlist </Text>\n            </View>\n          </TouchableWithoutFeedback>\n            {\n              item.favorite ? (\n                  <AntDesign name='heart' color=\"red\" size={49} style={styles.heart} onPress={() => handleFavorite(item)}/>\n              ) : <AntDesign name='hearto' size={49} style={styles.heart} onPress={() => handleFavorite(item)}/>\n            }\n          </View>\n        </View>\n      </TouchableWithoutFeedback>\n    );\n  }\n\n  const renderPlayPause = () => {\n    return isPlaying ? (\n      <AntDesign name='pause' size={75} style={styles.playPause} onPress={() => handlePlayTrack(null)}/>\n    ) : (\n      <Entypo name='controller-play' size={75} style={styles.playPause} onPress={() => handlePlayTrack(null)} />\n    );\n  };\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <View style={styles.view1}>\n        <TextInput\n          style={styles.searchbar}\n          keyboardType=\"default\"\n          placeholder=\"Search tracks\"\n          placeholderTextColor=\"black\"\n          onChangeText={(text) => searchLogic(text)}\n        />\n      </View>\n      <View style={styles.view2}>\n        <View style={styles.topBorder}></View>\n        <FlatList\n          data={ tracksState }\n          extraData={ tracksState }\n          renderItem = { renderItem }\n          keyExtractor={(item) => item.id}\n          showsVerticalScrollIndicator={false}\n        />\n      </View>\n      <View style={styles.view3}>\n        <Progress.Bar \n          progress={ progress }\n          width={400} \n          height={19} \n          color=\"black\"\n          unfilledColor = \"#f1f2ff\"\n          style={styles.bar}\n        />\n        <View style={styles.controlsWrapper}>\n          <AntDesign name='banckward' size={50} style={styles.backward} onPress={() => handleForwardBackward(\"backward\")}/>\n          {renderPlayPause()}\n          <AntDesign name='forward' size={50} style={styles.forward} onPress={() => handleForwardBackward(\"forward\")}/>\n          {duration !== null && (\n            <Text style={styles.duration}>\n              {remainingMinutes >= 0 && remainingMinutes <= 9 ? \"0\" + remainingMinutes : remainingMinutes}:{remainingSeconds >= 0 && remainingSeconds <= 9 ? \"0\" + remainingSeconds : remainingSeconds} / {minutes >= 0 && minutes <= 9 ? \"0\" + minutes : minutes}:{seconds >= 0 && seconds <= 9 ? \"0\" + seconds : seconds}\n            </Text>\n          )}\n        </View>\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: \"column\",\n    backgroundColor: '#f1f2ff'\n  },\n  view1: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  searchbar: {\n    backgroundColor: \"#FFFFFF\",\n    height: 50,\n    width: 320,\n    borderWidth: 1,\n    borderRadius: 30,\n    borderColor: \"black\",\n    fontSize: 25,\n    fontWeight: '400',\n    fontFamily: 'Roboto',\n    paddingLeft: 20\n  },\n  view2: {\n    flex: 9,\n    alignItems: \"flex-start\",\n    justifyContent: \"flex-start\",\n  },\n  topBorder: {\n    width: Dimensions.get('window').width,\n    borderTopWidth: 1,\n  },\n  box: {\n    flexDirection: \"row\",\n    height: 140,\n    width: Dimensions.get('window').width,\n    borderBottomWidth: 1,\n    alignItems: \"center\",\n    justifyContent: \"flex-start\",\n  },\n  icon: {\n    height: 170,\n    width: 170,\n    marginTop: 4\n  },\n  trackName: {\n    color: \"black\",\n    fontSize: 24,\n    fontWeight: '600',\n    fontFamily: 'Roboto',\n  },\n  trackPerformer: {\n    color: \"black\",\n    fontSize: 24,\n    fontWeight: '400',\n    fontFamily: 'Roboto',\n    fontStyle: \"italic\"\n  },\n  createPlaylistButton: {\n    width: 134,\n    height: 40,\n    borderRadius: 30,\n    borderColor: '#3d54dc',\n    backgroundColor: \"#3d54dc\",\n    borderWidth: 3,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    top: 7,\n    right: 10\n  },\n  createPlaylistButtonText: {\n    color: \"white\",\n    fontSize: 19,\n    fontWeight: '400',\n    fontFamily: 'Roboto'\n  },\n  heart: {\n    left: 30,\n    top: 3\n  },\n  view3: {\n    flex: 1.5,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  bar: {\n    top: 10\n  },\n  controlsWrapper: {\n    flexDirection: \"row\", \n    width: Dimensions.get('window').width,\n    paddingLeft: 630\n  },\n  backward: {\n    paddingTop: 13\n  },\n  playPause: {\n    top: 5,\n    marginLeft: 10,\n    marginRight: 4\n  },\n  forward: {\n    paddingTop: 13\n  },\n  duration: {\n    color: \"black\",\n    fontSize: 17,\n    fontWeight: '600',\n    fontFamily: 'Roboto',\n    paddingTop: 12,\n    paddingLeft: 9\n  }\n});\n\nexport default TracksScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module"}