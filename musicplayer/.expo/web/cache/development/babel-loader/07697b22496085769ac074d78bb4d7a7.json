{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { createContext } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { tracks } from \"../utilities/tracks\";\nvar MusicContext = createContext();\nvar initialState = {\n  tracks: tracks,\n  favorites: 0,\n  playlists: []\n};\nvar musicReducer = function musicReducer(state, action) {\n  var type = action.type,\n    payload = action.payload;\n  switch (type) {\n    case \"HANDLE_FAVORITE\":\n      var isAdded = false;\n      var updatedTracks = state.tracks.map(function (track) {\n        if (track.id === payload.data.id) {\n          if (track.favorite === false) {\n            isAdded = true;\n          }\n          return _objectSpread(_objectSpread({}, track), {}, {\n            favorite: !track.favorite\n          });\n        } else {\n          return track;\n        }\n      });\n      if (isAdded === false) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          tracks: updatedTracks,\n          favorites: state.favorites - 1\n        });\n      } else {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          tracks: updatedTracks,\n          favorites: state.favorites + 1\n        });\n      }\n    case \"CREATE_PLAYLIST\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        playlists: [].concat(_toConsumableArray(state.playlists), [payload.data])\n      });\n    case \"DELETE_PLAYLIST\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        playlists: state.playlists.filter(function (playlist) {\n          return playlist.name !== payload.data.name;\n        })\n      });\n    case \"ADD_TRACK_TO_PLAYLIST\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        playlists: state.playlists.map(function (playlist) {\n          if (playlist.name === payload.data.playlistName) {\n            return _objectSpread(_objectSpread({}, playlist), {}, {\n              tracks: [].concat(_toConsumableArray(playlist.tracks), [payload.data.track])\n            });\n          }\n          return playlist;\n        })\n      });\n    case \"DELETE_TRACK_FROM_PLAYLIST\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        playlists: state.playlists.map(function (playlist) {\n          if (playlist.name === payload.data.playlistName) {\n            var _updatedTracks = playlist.tracks.filter(function (track) {\n              return track.id !== payload.data.track.id;\n            });\n            return _objectSpread(_objectSpread({}, playlist), {}, {\n              tracks: _updatedTracks\n            });\n          }\n          return playlist;\n        })\n      });\n    default:\n      Alert.alert(\"Error! Something went wrong.\");\n  }\n};\nexport { MusicContext, initialState, musicReducer };","map":{"version":3,"names":["createContext","Alert","tracks","MusicContext","initialState","favorites","playlists","musicReducer","state","action","type","payload","isAdded","updatedTracks","map","track","id","data","favorite","_objectSpread","concat","_toConsumableArray","filter","playlist","name","playlistName","alert"],"sources":["/usercode/musicplayer/utilities/store.js"],"sourcesContent":["import { createContext } from 'react';\nimport { Alert } from 'react-native';\nimport { tracks } from '../utilities/tracks';\n\nconst MusicContext = createContext();\n\nconst initialState = {\n    tracks: tracks,\n    favorites: 0,\n    playlists: []\n};\n\nconst musicReducer = (state, action) => {\n    const { type, payload } = action;\n    switch (type) {\n        case \"HANDLE_FAVORITE\":\n            let isAdded = false; // to track whether it was added to favorites or removed from it\n            const updatedTracks = state.tracks.map(track => {\n                if (track.id === payload.data.id) {\n                    if (track.favorite === false) {\n                        isAdded = true; // it was added to favorites otherwise it was removed\n                    }\n                    return {\n                        ...track,\n                        favorite: !track.favorite\n                    };\n                } else {\n                    return track;\n                }\n            });\n            // Remove the track from favorites if isAdded is false\n            if (isAdded === false) {\n                return {\n                    ...state,\n                    tracks: updatedTracks,\n                    favorites: state.favorites - 1\n                };\n            }\n            // Otherwise, add the track to the favorites list\n            else {\n                return {\n                    ...state,\n                    tracks: updatedTracks,\n                    favorites: state.favorites + 1\n                };\n            }\n        case \"CREATE_PLAYLIST\":\n            // Playlists are in the following format\n            // [{name: playlistName, tracks: playlistTracks}]\n            // i.e., playlists is a list of objects\n            // Each object has name of the playlist and tracks in that particular playlist\n            return {\n                ...state,\n                playlists: [...state.playlists, payload.data]\n            };\n        case \"DELETE_PLAYLIST\":\n            return {\n                ...state,\n                playlists: state.playlists.filter(\n                    (playlist) => playlist.name !== payload.data.name\n                ),\n            };\n        case \"ADD_TRACK_TO_PLAYLIST\":\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.name === payload.data.playlistName) {\n                        return {\n                            ...playlist,\n                            tracks: [...playlist.tracks, payload.data.track]\n                        };\n                    }\n                return playlist;\n                })\n            };\n        case \"DELETE_TRACK_FROM_PLAYLIST\":\n            return {\n                ...state,\n                playlists: state.playlists.map(playlist => {\n                    if (playlist.name === payload.data.playlistName) {\n                        const updatedTracks = playlist.tracks.filter(track => track.id !== payload.data.track.id);\n                        return {\n                            ...playlist,\n                            tracks: updatedTracks\n                        };\n                    }\n                return playlist;\n                })\n            };\n        default:\n            Alert.alert(\"Error! Something went wrong.\")\n    }\n};\n\nexport { MusicContext, initialState, musicReducer };"],"mappings":";;;;AAAA,SAASA,aAAa,QAAQ,OAAO;AAAC,OAAAC,KAAA;AAEtC,SAASC,MAAM;AAEf,IAAMC,YAAY,GAAGH,aAAa,CAAC,CAAC;AAEpC,IAAMI,YAAY,GAAG;EACjBF,MAAM,EAAEA,MAAM;EACdG,SAAS,EAAE,CAAC;EACZC,SAAS,EAAE;AACf,CAAC;AAED,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,KAAK,EAAEC,MAAM,EAAK;EACpC,IAAQC,IAAI,GAAcD,MAAM,CAAxBC,IAAI;IAAEC,OAAO,GAAKF,MAAM,CAAlBE,OAAO;EACrB,QAAQD,IAAI;IACR,KAAK,iBAAiB;MAClB,IAAIE,OAAO,GAAG,KAAK;MACnB,IAAMC,aAAa,GAAGL,KAAK,CAACN,MAAM,CAACY,GAAG,CAAC,UAAAC,KAAK,EAAI;QAC5C,IAAIA,KAAK,CAACC,EAAE,KAAKL,OAAO,CAACM,IAAI,CAACD,EAAE,EAAE;UAC9B,IAAID,KAAK,CAACG,QAAQ,KAAK,KAAK,EAAE;YAC1BN,OAAO,GAAG,IAAI;UAClB;UACA,OAAAO,aAAA,CAAAA,aAAA,KACOJ,KAAK;YACRG,QAAQ,EAAE,CAACH,KAAK,CAACG;UAAQ;QAEjC,CAAC,MAAM;UACH,OAAOH,KAAK;QAChB;MACJ,CAAC,CAAC;MAEF,IAAIH,OAAO,KAAK,KAAK,EAAE;QACnB,OAAAO,aAAA,CAAAA,aAAA,KACOX,KAAK;UACRN,MAAM,EAAEW,aAAa;UACrBR,SAAS,EAAEG,KAAK,CAACH,SAAS,GAAG;QAAC;MAEtC,CAAC,MAEI;QACD,OAAAc,aAAA,CAAAA,aAAA,KACOX,KAAK;UACRN,MAAM,EAAEW,aAAa;UACrBR,SAAS,EAAEG,KAAK,CAACH,SAAS,GAAG;QAAC;MAEtC;IACJ,KAAK,iBAAiB;MAKlB,OAAAc,aAAA,CAAAA,aAAA,KACOX,KAAK;QACRF,SAAS,KAAAc,MAAA,CAAAC,kBAAA,CAAMb,KAAK,CAACF,SAAS,IAAEK,OAAO,CAACM,IAAI;MAAC;IAErD,KAAK,iBAAiB;MAClB,OAAAE,aAAA,CAAAA,aAAA,KACOX,KAAK;QACRF,SAAS,EAAEE,KAAK,CAACF,SAAS,CAACgB,MAAM,CAC7B,UAACC,QAAQ;UAAA,OAAKA,QAAQ,CAACC,IAAI,KAAKb,OAAO,CAACM,IAAI,CAACO,IAAI;QAAA,CACrD;MAAC;IAET,KAAK,uBAAuB;MACxB,OAAAL,aAAA,CAAAA,aAAA,KACOX,KAAK;QACRF,SAAS,EAAEE,KAAK,CAACF,SAAS,CAACQ,GAAG,CAAC,UAAAS,QAAQ,EAAI;UACvC,IAAIA,QAAQ,CAACC,IAAI,KAAKb,OAAO,CAACM,IAAI,CAACQ,YAAY,EAAE;YAC7C,OAAAN,aAAA,CAAAA,aAAA,KACOI,QAAQ;cACXrB,MAAM,KAAAkB,MAAA,CAAAC,kBAAA,CAAME,QAAQ,CAACrB,MAAM,IAAES,OAAO,CAACM,IAAI,CAACF,KAAK;YAAC;UAExD;UACJ,OAAOQ,QAAQ;QACf,CAAC;MAAC;IAEV,KAAK,4BAA4B;MAC7B,OAAAJ,aAAA,CAAAA,aAAA,KACOX,KAAK;QACRF,SAAS,EAAEE,KAAK,CAACF,SAAS,CAACQ,GAAG,CAAC,UAAAS,QAAQ,EAAI;UACvC,IAAIA,QAAQ,CAACC,IAAI,KAAKb,OAAO,CAACM,IAAI,CAACQ,YAAY,EAAE;YAC7C,IAAMZ,cAAa,GAAGU,QAAQ,CAACrB,MAAM,CAACoB,MAAM,CAAC,UAAAP,KAAK;cAAA,OAAIA,KAAK,CAACC,EAAE,KAAKL,OAAO,CAACM,IAAI,CAACF,KAAK,CAACC,EAAE;YAAA,EAAC;YACzF,OAAAG,aAAA,CAAAA,aAAA,KACOI,QAAQ;cACXrB,MAAM,EAAEW;YAAa;UAE7B;UACJ,OAAOU,QAAQ;QACf,CAAC;MAAC;IAEV;MACItB,KAAK,CAACyB,KAAK,CAAC,8BAA8B,CAAC;EACnD;AACJ,CAAC;AAED,SAASvB,YAAY,EAAEC,YAAY,EAAEG,YAAY"},"metadata":{},"sourceType":"module"}